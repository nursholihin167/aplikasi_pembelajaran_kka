<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Aplikasi Pembelajaran SMA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Segoe UI,Arial,sans-serif;margin:0;background:#f2f4f8}
header{background:#1e3c72;color:#fff;padding:15px;text-align:center}
.container{max-width:1100px;margin:auto;padding:20px}
button{padding:12px 16px;margin:6px;border:none;border-radius:8px;background:#1e3c72;color:#fff;cursor:pointer}
button:hover{background:#2a5298}
.back{background:#777}
.card{background:#fff;border-radius:10px;padding:15px;margin:15px 0}
.hidden{display:none}
input,select,textarea{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:1px solid #ccc}
small{color:#666}
</style>
</head>
<body>

<header>
<h1>Aplikasi Pembelajaran SMA</h1>
<p>Informatika & KKA</p>
</header>

<div class="container">

<!-- LOGIN -->
<div id="loginBox" class="card">
<h2>Login</h2>
<input id="loginUser" placeholder="Username">
<input id="loginPass" type="password" placeholder="Password (khusus guru)">
<button onclick="login()">Login</button>
<p><small id="infoLogin"></small></p>
<button onclick="showRegister()">Daftar Siswa</button>
</div>

<!-- REGISTER SISWA -->
<div id="registerBox" class="card hidden">
<h2>Daftar Siswa</h2>
<input id="regNama" placeholder="Nama Lengkap">
<input id="regUser" placeholder="Username">
<select id="regKelas"></select>
<select id="regAbsen"></select>
<button onclick="registerSiswa()">Daftar</button>
<button class="back" onclick="backLogin()">Kembali</button>
</div>

<!-- MENU SISWA -->
<div id="menuSiswa" class="hidden">
<h2 id="siswaInfo"></h2>
<button onclick="pilihMapel('informatika')">ðŸ“˜ Informatika</button>
<button onclick="pilihMapel('kka')">ðŸ¤– KKA</button>
<button class="back" onclick="logout()">Logout</button>
</div>

<!-- MENU GURU -->
<div id="guruBox" class="hidden">
<h2>Menu Guru</h2>
<select id="mapelGuru">
<option value="informatika">Informatika</option>
<option value="kka">KKA</option>
</select>
<input id="judulMateri" placeholder="Judul Materi">
<textarea id="isiMateri" placeholder="Isi Materi"></textarea>
<input id="linkFile" placeholder="Link File">
<input id="linkVideo" placeholder="Link Video YouTube">
<button onclick="simpanMateri()">Simpan Materi</button>
<button class="back" onclick="logout()">Logout</button>
</div>

</div>

<script>
// INIT
for(let i=1;i<=10;i++) regKelas.innerHTML+=`<option>X-${i}</option>`;
for(let i=1;i<=40;i++) regAbsen.innerHTML+=`<option>${i}</option>`;

let siswa = JSON.parse(localStorage.getItem('siswa')) || [];
let materi = JSON.parse(localStorage.getItem('materi')) || {informatika:[],kka:[]};

// LOGIN GABUNGAN
function login(){
 let user = loginUser.value;
 let pass = loginPass.value;

 // LOGIN GURU
 if(user==='guru' && pass==='admin123'){
  loginBox.classList.add('hidden');
  guruBox.classList.remove('hidden');
  return;
 }

 // LOGIN SISWA
 let s = siswa.find(x=>x.username===user);
 if(!s){
  infoLogin.innerText = "Belum punya akun? Silakan daftar.";
  return;
 }

 loginBox.classList.add('hidden');
 menuSiswa.classList.remove('hidden');
 siswaInfo.innerText = `Selamat datang, ${s.nama} (${s.username})`;
}

// REGISTER
function showRegister(){
 loginBox.classList.add('hidden');
 registerBox.classList.remove('hidden');
}

function backLogin(){
 registerBox.classList.add('hidden');
 loginBox.classList.remove('hidden');
}

function registerSiswa(){
 if(siswa.find(s=>s.username===regUser.value)){
  alert('Username sudah digunakan');
  return;
 }

 siswa.push({
  nama: regNama.value,
  username: regUser.value,
  kelas: regKelas.value,
  absen: regAbsen.value
 });

 localStorage.setItem('siswa',JSON.stringify(siswa));
 alert('Pendaftaran berhasil');
 backLogin();
}

// MENU SISWA
function pilihMapel(m){
 alert('Materi '+m+' ditampilkan (contoh)');
}

// GURU
function simpanMateri(){
 materi[mapelGuru.value].push({
  judul: judulMateri.value,
  isi: isiMateri.value,
  file: linkFile.value,
  video: linkVideo.value
 });
 localStorage.setItem('materi',JSON.stringify(materi));
 alert('Materi tersimpan');
 judulMateri.value=isiMateri.value=linkFile.value=linkVideo.value='';
}

function logout(){
 location.reload();
}
</script>

</body>
</html>
