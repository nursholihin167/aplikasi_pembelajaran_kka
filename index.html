<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KKA - Etika AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
 font-family:Segoe UI,sans-serif;
 background:linear-gradient(135deg,#1e3c72,#2a5298);
 margin:0;
}
.container{
 max-width:900px;
 margin:auto;
 background:white;
 padding:20px;
 border-radius:12px;
 margin-top:30px;
}
h1,h2{text-align:center;color:#1e3c72;}
button{
 width:100%;
 padding:12px;
 margin:8px 0;
 border-radius:10px;
 background:#1e3c72;
 color:white;
 border:none;
 font-size:16px;
 cursor:pointer;
}
button:hover{background:#2a5298;}
.hidden{display:none;}
.card{
 background:#f5f7fa;
 padding:15px;
 border-radius:10px;
 margin-top:15px;
}
input,select,textarea{
 width:100%;
 padding:10px;
 margin:6px 0;
 border-radius:8px;
}
.menu-btn{
 font-size:18px;
}
.back{
 background:#999;
}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ“˜ Media Pembelajaran KKA<br>Etika Penggunaan AI</h1>

<!-- LOGIN -->
<div id="loginBox">
<h2>Login</h2>
<input id="loginUser" placeholder="Username">
<input id="loginPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="showRegister()">Daftar Siswa</button>
</div>

<!-- REGISTER -->
<div id="registerBox" class="hidden">
<h2>Registrasi Siswa</h2>
<input id="regNama" placeholder="Nama Lengkap">
<input id="regUser" placeholder="Username">
<select id="regKelas"></select>
<select id="regAbsen"></select>
<input id="regPass" type="password" placeholder="Password">
<button onclick="register()">Daftar</button>
<button class="back" onclick="backLogin()">Kembali</button>
</div>

<!-- MENU SISWA -->
<div id="menuSiswa" class="hidden">
<h2>ğŸ‘¨â€ğŸ“ Menu Siswa</h2>
<button class="menu-btn" onclick="bukaMateri()">ğŸ“˜ Link Materi</button>
<button class="menu-btn" onclick="bukaKuis()">ğŸ“ Latihan (Kuis)</button>
<button class="back" onclick="logout()">Logout</button>
</div>

<!-- MATERI -->
<div id="materiBox" class="hidden">
<h2>ğŸ“˜ Materi</h2>
<div class="card" id="materiTampil"></div>
<button class="back" onclick="kembaliMenu()">â¬… Kembali ke Menu</button>
</div>

<!-- KUIS -->
<div id="kuisBox" class="hidden">
<h2>ğŸ“ Latihan (Kuis)</h2>
<div class="card">
<div id="kuisTampil"></div>
<button onclick="submitQuiz()">Kirim Jawaban</button>
<p id="hasil"></p>
</div>
<button class="back" onclick="kembaliMenu()">â¬… Kembali ke Menu</button>
</div>

<!-- GURU -->
<div id="guruBox" class="hidden">
<h2>ğŸ‘©â€ğŸ« Dashboard Guru</h2>

<div class="card">
<h3>â• Tambah Materi</h3>
<input id="judulMateri" placeholder="Judul Materi">
<textarea id="isiMateri" placeholder="Isi Materi"></textarea>
<button onclick="tambahMateri()">Simpan Materi</button>
</div>

<div class="card">
<h3>â• Tambah Soal</h3>
<textarea id="pertanyaan" placeholder="Pertanyaan"></textarea>
<input id="opsiA" placeholder="Opsi A">
<input id="opsiB" placeholder="Opsi B">
<input id="opsiC" placeholder="Opsi C">
<input id="opsiD" placeholder="Opsi D">
<input id="opsiE" placeholder="Opsi E">
<select id="jawaban">
<option value="">Jawaban Benar</option>
<option>A</option><option>B</option><option>C</option>
<option>D</option><option>E</option>
</select>
<input id="skorSoal" type="number" placeholder="Skor Soal">
<button onclick="tambahSoal()">Simpan Soal</button>
</div>

<button class="back" onclick="logout()">Logout</button>
</div>

</div>

<script>
// INIT SELECT
for(let i=1;i<=10;i++) regKelas.innerHTML+=`<option>X-${i}</option>`;
for(let i=1;i<=40;i++) regAbsen.innerHTML+=`<option>${i}</option>`;

// DATABASE
let users = JSON.parse(localStorage.getItem("users")) || [
 {username:"guru",password:"admin123",role:"guru"}
];
localStorage.setItem("users",JSON.stringify(users));

let materi = JSON.parse(localStorage.getItem("materi")) || [];
let soal = JSON.parse(localStorage.getItem("soal")) || [];
let scores = JSON.parse(localStorage.getItem("scores")) || [];

let currentUser="";

// LOGIN
function login(){
 const u=loginUser.value,p=loginPass.value;
 const user=users.find(x=>x.username===u&&x.password===p);
 if(!user){alert("Login gagal");return;}
 loginBox.classList.add("hidden");
 if(user.role==="guru"){
  guruBox.classList.remove("hidden");
 }else{
  menuSiswa.classList.remove("hidden");
  currentUser=u;
 }
}

// REGISTER
function showRegister(){
 loginBox.classList.add("hidden");
 registerBox.classList.remove("hidden");
}
function backLogin(){
 registerBox.classList.add("hidden");
 loginBox.classList.remove("hidden");
}
function register(){
 users.push({
  nama:regNama.value,
  username:regUser.value,
  password:regPass.value,
  kelas:regKelas.value,
  absen:regAbsen.value,
  role:"siswa"
 });
 localStorage.setItem("users",JSON.stringify(users));
 alert("Registrasi berhasil");
 backLogin();
}

// MENU NAVIGASI SISWA
function bukaMateri(){
 menuSiswa.classList.add("hidden");
 materiBox.classList.remove("hidden");
 tampilMateri();
}
function bukaKuis(){
 menuSiswa.classList.add("hidden");
 kuisBox.classList.remove("hidden");
 tampilSoal();
}
function kembaliMenu(){
 materiBox.classList.add("hidden");
 kuisBox.classList.add("hidden");
 menuSiswa.classList.remove("hidden");
}

// MATERI
function tambahMateri(){
 materi.push({judul:judulMateri.value,isi:isiMateri.value});
 localStorage.setItem("materi",JSON.stringify(materi));
 alert("Materi disimpan");
}
function tampilMateri(){
 materiTampil.innerHTML="";
 materi.forEach(m=>{
  materiTampil.innerHTML+=`<h4>${m.judul}</h4><p>${m.isi}</p>`;
 });
}

// SOAL
function tambahSoal(){
 soal.push({
  tanya:pertanyaan.value,
  opsi:{A:opsiA.value,B:opsiB.value,C:opsiC.value,D:opsiD.value,E:opsiE.value},
  jawab:jawaban.value,
  skor:Number(skorSoal.value)
 });
 localStorage.setItem("soal",JSON.stringify(soal));
 alert("Soal ditambahkan");
}
function tampilSoal(){
 kuisTampil.innerHTML="";
 soal.forEach((s,i)=>{
  let opsiHTML="";
  for(let k in s.opsi){
   opsiHTML+=`<label><input type="radio" name="q${i}" value="${k}"> ${k}. ${s.opsi[k]}</label><br>`;
  }
  kuisTampil.innerHTML+=`
  <p><b>${i+1}. ${s.tanya}</b> (${s.skor} poin)</p>
  ${opsiHTML}
  `;
 });
}

// QUIZ
function submitQuiz(){
 let total=0;
 soal.forEach((s,i)=>{
  const pilih=document.querySelector(`input[name="q${i}"]:checked`);
  if(pilih && pilih.value===s.jawab) total+=s.skor;
 });
 scores.push({user:currentUser,nilai:total});
 localStorage.setItem("scores",JSON.stringify(scores));
 hasil.innerHTML="Nilai Anda: <b>"+total+"</b>";
}

function logout(){location.reload();}
</script>

</body>
</html>